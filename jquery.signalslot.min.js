(function(d){if(typeof d!="function"||typeof d.fn==typeof __undefined__){throw new Error("jquery library should included first of all. ")}if(typeof d.signal=="function"){return}function a(l,m){this.scope=l;this.callback=m;this.getScope=function(){return this.scope}}a.prototype.call=function(m){var l;if(typeof this.callback!="function"){return}if(m&&typeof(m)=="object"&&typeof(m.pop)=="function"){l=(function(n,o){return function(){n.callback.apply(n.getScope(),o)}})(this,m)}else{l=(function(n,o){return function(){n.callback.call(n.getScope(),o)}})(this,m)}l()};var c={};var f=/^\s+|\s+$/g;var g=function(l,n){for(var o=0;o<c[l].length;o++){var m=c[l][o];m.call(n)}};var k=function(l,q,m){var n=new a(this,q);if(typeof q!="function"){return false}if(!(l in c)||c[l].constructor!=Array){c[l]=[]}if(!m){var p=false;for(var o=0;o<c[l].length;o++){if(c[l][o].callback===q){if(p){delete c[l][o];o--}else{c[l][o]=n;p=true}}}if(p){return true}}c[l].push(n)};var j=function(l,q,m){var n=new a(window,q);if(typeof q!="function"){return false}if(!(l in c)||c[l].constructor!=Array){c[l]=[]}if(!m){var p=false;for(var o=0;o<c[l].length;o++){if(c[l][o].callback===q){if(p){delete c[l][o];o--}else{c[l][o]=n;p=true}}}if(p){return true}}c[l].push(n)};var b=function(l){try{return c[l].length}catch(m){return 0}};var e=function(l){return(typeof l=="string")&&((l=l.replace(f,"")).length>=1)&&(typeof c[l]=="array")&&(c[l].length>0)};var i=function(m,p){try{if(typeof p==typeof __undefined__){delete c[m];return}var l=c[m];for(var n=0;n<l.length;n++){if(l[n].callback===p){delete l[n]}}}catch(o){alert(id+": "+o.message)}};function h(m,n,l){if(l&&typeof(l)=="object"&&typeof(l.pop)=="function"){return n.apply(m,l)}else{return n.call(m,l)}}d.fn.extend({signal:function(l,m,n){var o;if(typeof l!=typeof"string"||(l=l.replace(f,"")).length<=0){throw new Error("Signal ID is not valid - "+l)}m=(typeof m==typeof __undefined__)?"":m;n=d.extend({},d.signalslot.defaults,n);if(typeof n.prefunc!="function"&&typeof n.callback!="function"){throw new Error("prefunc and callback are invalid function.")}o=function(p){if(h(p.data,n.prefunc)){if(d.slot.count(l)){g(l,m);h(p.data,n.callback)}}};return this.each(function(){d(this).bind(n.evt,this,o)})},slot:function(l,n,m){return this.each(function(){h(this,k,[l,n,true])})}});d.signalslot={};d.extend(d.signalslot,{defaults:{evt:"click",prefunc:function(){return true},callback:function(){}}});d.slot={count:b,exist:e,add:j,remove:i}})(jQuery);
